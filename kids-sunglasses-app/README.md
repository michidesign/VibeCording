# Kids Sunglasses

子供の写真にサングラスを自動で追加するWebアプリケーションです。

AIが顔を自動検出し、目の位置に合わせてサングラスを合成します。SNSなどに子供の写真を投稿する際、プライバシー保護のために目元を隠したい場合に便利です。

## 機能

- 写真の自動顔検出（AI使用）
- 目の位置に合わせたサングラス自動配置
- 顔の傾きや向きに応じたサングラスの角度調整
- 複数人の顔に対応（全員にサングラスを追加）
- カスタムサングラス画像のアップロード
- 複数画像の一括処理
- 処理済み画像のダウンロード（複数の場合はZIP形式）

## 必要環境

- インターネット接続（AIモデルの読み込みに必要）
- Python 3（ローカルサーバー起動用）
- モダンブラウザ（Chrome, Safari, Firefox, Edge）

## 使い方

### 1. アプリの起動

`start-server.command` をダブルクリックしてください。

- ターミナルが開き、ローカルサーバーが起動します
- ブラウザが自動で開きます
- 「準備完了」と表示されるまでお待ちください

### 2. サングラス画像の選択（任意）

デフォルトのサングラスを使用する場合はこのステップをスキップできます。

カスタムサングラスを使用する場合：
1. 「カスタム画像をアップロード」ボタンをクリック
2. PNG形式（透過背景推奨）のサングラス画像を選択

### 3. 写真のアップロード

以下のいずれかの方法で写真をアップロードします：

- 「ファイルを選択」ボタンをクリック
- 写真をドラッグ&ドロップ

複数の写真を同時に選択できます。

### 4. 処理結果の確認

- AIが自動で顔を検出し、サングラスを合成します
- 複数の写真がある場合は、矢印ボタンまたはサムネイルで切り替えられます

### 5. ダウンロード

「画像をダウンロード」ボタンをクリックして保存します。

- 1枚の場合：PNG形式でダウンロード
- 複数の場合：ZIP形式でまとめてダウンロード

### 6. 終了

ターミナルで `Ctrl + C` を押すか、ターミナルウィンドウを閉じてください。

## ファイル構成

```
kids-sunglasses-app/
├── README.md                 # このファイル
├── index.html                # メインHTML
├── style.css                 # スタイルシート
├── script.js                 # メインスクリプト
├── default-sunglasses.png    # デフォルトサングラス画像
└── start-server.command      # 起動スクリプト
```

## プライバシーについて

このアプリはプライバシーに配慮して設計されています。

- すべての画像処理はブラウザ内で完結します
- アップロードした写真は外部サーバーに送信されません
- AIモデルのみインターネットから読み込まれます

## トラブルシューティング

### 「モデル読み込みエラー」と表示される

- インターネット接続を確認してください
- `start-server.command` から起動していることを確認してください
- ブラウザをリロードしてみてください

### 顔が検出されない

- 顔が正面を向いている写真をお試しください
- 写真が明るすぎる/暗すぎる場合は検出されにくいことがあります
- 顔が小さすぎる場合は検出されにくいことがあります

### サングラスの位置がずれる

- 顔が大きく横を向いている場合は精度が下がります
- 正面または軽く横を向いた写真で最も良い結果が得られます

## 技術情報

- 顔検出: [face-api.js](https://github.com/justadudewhohacks/face-api.js) (TinyFaceDetector + 68点ランドマーク)
- 画像処理: Canvas API
- ZIPダウンロード: JSZip
